<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Nemo System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
:root{--r:#ff2b2b;--b:#300;--bg:#050505}
*{box-sizing:border-box}
body{margin:0;font-family:'Share Tech Mono',monospace;background:var(--bg);color:var(--r)}
#auth,#system{height:100vh}
#auth{display:flex;justify-content:center;align-items:center}
.box{width:380px;background:#0b0b0b;padding:30px;border:1px solid var(--b)}
input,button{width:100%;padding:10px;margin:6px 0;background:#000;border:1px solid var(--b);color:var(--r)}
button:hover{background:var(--r);color:#000;cursor:pointer}
#system{display:none;display:flex}
.sidebar{width:240px;padding:20px;border-right:1px solid var(--b)}
.sidebar button{margin-bottom:10px}
.main{flex:1;padding:20px}
.panel{display:none}
.panel.active{display:block}
.log{background:#000;border:1px solid var(--b);height:200px;overflow:auto;padding:10px;margin-top:10px}
.card{border:1px solid var(--b);padding:10px;margin-bottom:8px}
.small{font-size:12px;color:#ff7777}
</style>
</head>
<body>

<!-- AUTH -->
<div id="auth">
  <div class="box">
    <h2>NEMO ACCESS</h2>
    <input id="u" placeholder="Usuário">
    <input id="p" type="password" placeholder="Senha">
    <button onclick="login()">Login</button>
    <button onclick="register()">Registrar</button>
    <button onclick="useInvite()">Entrar com Convite</button>
  </div>
</div>

<!-- SYSTEM -->
<div id="system">
  <div class="sidebar">
    <h3 id="who"></h3>
    <button onclick="openP('scanner')">Scanner</button>
    <button onclick="openP('network')">Network</button>
    <button onclick="openP('tools')">Tools</button>
    <button onclick="openP('invite')">Convites</button>
    <button id="adminBtn" onclick="openP('users')">Usuários</button>
  </div>

  <div class="main">

<!-- SCANNER FUNCIONAL -->
<div id="scanner" class="panel">
  <h2>Scanner</h2>
  <input id="scanTarget" placeholder="IP ou domínio">
  <button onclick="startScan()">Iniciar Scan</button>
  <p id="scanStatus">Status: parado</p>
  <div class="log" id="scanLog"></div>
</div>

<!-- NETWORK -->
<div id="network" class="panel">
  <h2>Network</h2>
  <p id="pingResult">Ping: -- ms</p>
  <button onclick="realPing()">Medir Ping</button>
</div>

<!-- TOOLS -->
<div id="tools" class="panel">
  <h2>Tools</h2>
  <button onclick="tool('Port Scan')">Port Scan</button>
  <button onclick="tool('Packet Sniffer')">Packet Sniffer</button>
  <button onclick="tool('Hash Analyzer')">Hash Analyzer</button>
</div>

<!-- INVITE -->
<div id="invite" class="panel">
  <h2>Convites</h2>
  <button onclick="createInvite()">Gerar Convite</button>
  <p id="inviteLink" class="small"></p>
</div>

<!-- USERS -->
<div id="users" class="panel">
  <h2>Usuários</h2>
  <div id="userList"></div>
</div>

<div class="log" id="logBox"></div>

  </div>
</div>

<script>
/* ADMIN */
const ADMIN={u:"Nemo",p:"gustavo270908"};
let role="user",currentUser=null;

/* STORAGE */
const getUsers=()=>JSON.parse(localStorage.getItem("users")||"{}");
const saveUsers=u=>localStorage.setItem("users",JSON.stringify(u));
const getInv=()=>JSON.parse(localStorage.getItem("invites")||"[]");
const saveInv=i=>localStorage.setItem("invites",JSON.stringify(i));

/* REGISTER */
async function register(){
  const us=u.value,ps=p.value;
  if(!us||!ps) return alert("Campos vazios");
  if(us===ADMIN.u) return alert("Reservado");
  const users=getUsers();
  if(users[us]) return alert("Já existe");

  const geo=await fetch("https://ipapi.co/json/").then(r=>r.json());
  users[us]={p:ps,ip:geo.ip,region:`${geo.city}, ${geo.country_name}`};
  saveUsers(users);
  alert("Registrado");
}

/* LOGIN */
function login(){
  if(u.value===ADMIN.u && p.value===ADMIN.p){
    role="admin";currentUser=u.value;enter();return;
  }
  const users=getUsers();
  if(users[u.value] && users[u.value].p===p.value){
    role="user";currentUser=u.value;enter();
  } else alert("Inválido");
}

function enter(){
  auth.style.display="none";
  system.style.display="flex";
  who.innerText="USER: "+currentUser;
  if(role!=="admin") adminBtn.style.display="none";
  else loadUsers();
  log("Login efetuado");
}

/* PANELS */
function openP(id){
  document.querySelectorAll(".panel").forEach(p=>p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* SCANNER FUNCIONAL */
function startScan(){
  const target=scanTarget.value||"desconhecido";
  scanLog.innerHTML="";
  let steps=[
    "Resolvendo DNS",
    "Testando conexão",
    "Escaneando portas",
    "Analisando serviços",
    "Finalizando"
  ];
  let i=0;

  scanStatus.innerText="Scan iniciado em "+target;

  const t=setInterval(()=>{
    if(i<steps.length){
      scanLog.innerHTML+="> "+steps[i]+"<br>";
      if(steps[i]==="Escaneando portas"){
        scanLog.innerHTML+="> Porta 80 aberta<br>> Porta 443 aberta<br>";
      }
      if(steps[i]==="Analisando serviços"){
        scanLog.innerHTML+="> HTTP / HTTPS detectado<br>";
      }
      scanLog.scrollTop=scanLog.scrollHeight;
      scanStatus.innerText="Status: "+steps[i];
      i++;
    } else {
      clearInterval(t);
      scanStatus.innerText="Scan concluído";
      scanLog.innerHTML+="> Risco: MÉDIO<br>";
    }
  },1000);
}

/* NETWORK */
async function realPing(){
  const s=performance.now();
  await fetch("https://www.google.com/favicon.ico",{mode:"no-cors"});
  const ms=Math.round(performance.now()-s);
  pingResult.innerText="Ping: "+ms+" ms";
  log("Ping: "+ms+" ms");
}

/* TOOLS */
function tool(t){log("Tool executada: "+t)}

/* INVITE */
function createInvite(){
  const inv=getInv();
  const c=Math.random().toString(36).slice(2,10);
  inv.push(c);saveInv(inv);
  inviteLink.innerText=location.href+"?invite="+c;
}
function useInvite(){
  const c=prompt("Convite:");
  if(getInv().includes(c)) alert("Convite aceito");
  else alert("Inválido");
}

/* USERS */
function loadUsers(){
  const u=getUsers();
  userList.innerHTML="";
  for(const k in u){
    userList.innerHTML+=`
    <div class="card">
      <b>${k}</b><br>
      <span class="small">${u[k].region} | IP ${u[k].ip}</span>
    </div>`;
  }
}

/* LOG */
function log(t){
  logBox.innerHTML+="> "+t+"<br>";
  logBox.scrollTop=logBox.scrollHeight;
}
</script>

</body>
</html>
